# Phoenix LAB - Система автоматической обработки и публикации новостного контента

<p align="center">
  <img src="frontend/public/logo.png" alt="Phoenix LAB Logo" width="200">
</p>

## 📋 Оглавление

- [О проекте](#о-проекте)
- [Архитектура системы](#архитектура-системы)
- [Технологический стек](#технологический-стек)
- [Быстрый старт](#быстрый-старт)
- [Документация](#документация)
- [Структура проекта](#структура-проекта)

## 🎯 О проекте

Phoenix LAB — это комплексная система для автоматической обработки и публикации новостного контента с использованием технологий машинного обучения. Система предназначена для автоматизации процесса рерайта (переписывания) и суммаризации новостных текстов с последующей публикацией в различных мессенджер-платформах и социальных сетях.

### Зачем создан проект

Проект решает задачу автоматизации контент-маркетинга, позволяя:
- **Автоматизировать рерайт** новостных статей для публикации на разных платформах без дублирования контента
- **Сокращать длинные материалы** без потери ключевой информации
- **Публиковать обработанный контент** в Telegram каналы, VK, Instagram автоматически
- **Управлять контентом** через удобный веб-интерфейс

### Ключевые особенности

- 📰 **Автоматическое извлечение** текста по ссылке или из сообщения
- ✂️ **Выжимка/суммаризация** длинных материалов без потери контекста
- 🤖 **Автоматическое парафразирование** новостных текстов с сохранением смысла
- 📱 **Мультиплатформенная публикация** в Telegram, VK, Instagram
- 🎛️ **Веб-панель управления** для настройки и мониторинга
- 🔄 **Управление Telegram-ботом** через веб-интерфейс
- 📊 **Аналитика и логирование** всех операций
- ⚡ **Высокая производительность** благодаря кэшированию и асинхронной обработке
- 💰 **Система монетизации** с тарифными планами и ограничениями доступа к функциям

---

## 🏗️ Архитектура системы

Система построена по микросервисной архитектуре с разделением на следующие компоненты:

```
┌─────────────────────────────────────────────────────────────┐
│                    Next.js Web Application                   │
│              (Admin Panel + Telegram WebApp)                │
└──────────────┬───────────────────────────────────────────────┘
               │
       ┌───────┴────────┬──────────────┬──────────────┐
       │                │              │              │
┌──────▼──────┐  ┌──────▼──────┐  ┌───▼──────┐  ┌───▼──────┐
│  Telegram   │  │   ML        │  │ Rewrite  │  │ Database │
│    Bot      │  │  Service    │  │ Service  │  │          │
│ (aiogram)   │  │ (FastAPI)   │  │ (Flask)  │  │(PostgreSQL)
└──────┬──────┘  └──────┬──────┘  └─────┬────┘  └─────┬────┘
       │                │                │             │
       │                │                │             │
┌──────▼──────┐  ┌──────▼──────┐  ┌──────▼──────┐     │
│  Telegram   │  │  Hugging    │  │   Redis     │     │
│    API      │  │   Face      │  │  (Cache +   │     │
│             │  │  Models     │  │   Queue)    │     │
└─────────────┘  └─────────────┘  └─────────────┘     │
                                                       │
                                              ┌────────▼────────┐
                                              │  External APIs  │
                                              │  VK, Instagram  │
                                              └─────────────────┘
```

### Компоненты системы

1. **Frontend (Next.js)** — веб-интерфейс для управления и работы с контентом
2. **Rewrite Service (Flask)** — основной API для рерайта статей, интеграции с LLM и внешними API
3. **ML Service (FastAPI)** — сервис для обработки текста локальными ML моделями (парафразирование, суммаризация)
4. **Telegram Bot (aiogram)** — бот для управления каналами и авторизации
5. **PostgreSQL** — база данных для хранения пользователей, URL и результатов обработки
6. **Redis** — кэширование и очереди задач

---

## 🛠️ Технологический стек

### Frontend
- **Next.js 14+** (App Router) - React-фреймворк с SSR
- **TypeScript** - типизированный JavaScript
- **React 18** - библиотека для создания пользовательских интерфейсов

### Backend
- **Flask** (Python) - веб-фреймворк для Rewrite Service
- **FastAPI** (Python) - высокопроизводительный веб-фреймворк для ML-сервиса
- **aiogram 3.x** (Python) - асинхронный фреймворк для Telegram бота
- **PostgreSQL** - реляционная база данных
- **Redis** - кэширование и очереди задач

### Machine Learning
- **Hugging Face Transformers** - библиотека для работы с моделями
- **cointegrated/rut5-base-paraphraser** - модель для парафразирования (русский)
- **google/flan-t5-large** - модель для парафразирования (английский)
- **IlyaGusev/mbart_ru_sum_gazeta** - модель для суммаризации (русский)
- **facebook/bart-large-cnn** - модель для суммаризации (английский)
- **sentence-transformers/paraphrase-multilingual-mpnet-base-v2** - модель для проверки схожести

### LLM (Large Language Models)
- **Qwen 2.5 72B** (через OpenRouter) - для рерайта через LLM
- **YandexGPT** (через Yandex Cloud API) - для рерайта через LLM

### Интеграции
- **OpenRouter API** - доступ к различным LLM моделям
- **Yandex Cloud API** - доступ к YandexGPT
- **Telegram Bot API** (через aiogram) - управление каналами и публикация
- **Kandinsky API** (FusionBrain) - генерация изображений
- **Pexels API** - поиск изображений
- **Unsplash API** - альтернативный поиск изображений

### DevOps
- **Docker** + **Docker Compose** - контейнеризация всех сервисов
- **PostgreSQL 15** - база данных
- **Redis 7** - кэширование

---

## 🚀 Быстрый старт

### Требования

- Docker Desktop (Windows/Mac) или Docker Engine (Linux)
- Минимум 8GB RAM (рекомендуется 16GB)
- 10GB свободного места на диске (для моделей ML)

### Запуск

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/ab0vee/Phoenix_lab_ML.git
   cd Phoenix_lab_ML
   ```

2. **Создайте .env файл:**
   ```bash
   # Windows
   .\setup-env.ps1
   
   # Linux/Mac
   chmod +x setup-env.sh
   ./setup-env.sh
   ```

3. **Запустите все сервисы:**
   ```bash
   docker-compose up -d --build
   ```

4. **Откройте в браузере:**
   - Frontend: http://localhost:3000
   - ML Service API Docs: http://localhost:8000/docs
   - Rewrite Service Health: http://localhost:5000/api/health

**Примечание:** При первом запуске ML Service автоматически скачает модели (~2-3 GB). Это может занять 10-30 минут в зависимости от скорости интернета.

---

## 📚 Документация

Подробная документация находится в папке [`docs/`](./docs/):

- [**ML Модели**](./docs/ML_MODELS.md) - Подробное описание используемых ML моделей, датасетов, загрузки и работы
- [**API Документация**](./docs/API.md) - Полное описание всех API эндпоинтов и зависимостей
- [**LLM Модели**](./docs/LLM_MODELS.md) - Принцип работы с LLM моделями (Qwen, YandexGPT), функционал
- [**База данных**](./docs/DATABASE.md) - Описание БД, эндпоинтов, работы с пользователями и ссылками
- [**Технологические стеки**](./docs/TECH_STACK.md) - Детальное описание используемых технологий и их преимуществ
- [**Docker**](./docs/DOCKER.md) - Описание контейнеров, их назначение и что они запускают
- [**Frontend**](./docs/FRONTEND.md) - Описание фронтенда, фреймворка, функционала
- [**Telegram Bot**](./docs/TELEGRAM_BOT.md) - Описание бота, библиотеки, преимуществ, функционала
- [**Backend**](./docs/BACKEND.md) - Подробное описание бэкенд сервисов

---

## 📁 Структура проекта

```
phoenix-lab/
├── frontend/                 # Next.js приложение
│   ├── app/                  # App Router страницы
│   │   ├── components/       # React компоненты
│   │   ├── page.tsx          # Главная страница
│   │   └── layout.tsx        # Layout
│   ├── public/               # Статические файлы
│   └── package.json          # Зависимости Node.js
│
├── backend/                  # Backend сервисы
│   ├── ml_service/           # FastAPI ML-сервис
│   │   ├── api/              # API endpoints
│   │   ├── services/         # Сервисы обработки текста
│   │   └── config.py         # Конфигурация
│   │
│   ├── rewrite_service/      # Flask API для рерайта
│   │   ├── server.py         # Главный файл сервиса
│   │   └── database.py       # Работа с БД
│   │
│   ├── telegram_bot/         # Telegram бот (aiogram)
│   │   ├── main.py           # Главный файл бота
│   │   ├── channels.json     # Список каналов
│   │   └── auth_tokens.json  # Токены авторизации
│   │
│   └── database/             # Схемы и модели БД
│       ├── models.py         # SQLAlchemy модели
│       └── schema.sql        # SQL схема
│
├── docs/                     # Документация
│   ├── ML_MODELS.md
│   ├── API.md
│   ├── LLM_MODELS.md
│   ├── DATABASE.md
│   ├── TECH_STACK.md
│   ├── DOCKER.md
│   ├── FRONTEND.md
│   ├── TELEGRAM_BOT.md
│   └── BACKEND.md
│
├── docker-compose.yml        # Конфигурация Docker Compose
├── setup-env.ps1            # Скрипт настройки .env (Windows)
├── setup-env.sh             # Скрипт настройки .env (Linux/Mac)
├── .env.example             # Пример переменных окружения
└── README.md                # Этот файл
```

---

## 💡 Основные возможности

### 1. Обработка новостей

- Загрузка новостных текстов через веб-интерфейс или API
- Автоматическое парафразирование с использованием ML или LLM моделей
- Суммаризация длинных материалов
- Проверка семантической схожести оригинального и обработанного текста
- Сохранение истории изменений

### 2. Публикация контента

- **Telegram**: автоматическая публикация в каналы и группы через бота
- **VK**: публикация на стене группы/страницы (в разработке)
- **Instagram**: публикация постов (в разработке)
- Планирование публикаций на определенное время
- Массовая публикация с настраиваемыми задержками

### 3. Управление ботом

- Настройка команд и ответов бота
- Управление подписками и каналами
- Мониторинг активности бота
- Статистика использования

### 4. Система монетизации

- Тарифные планы (Пользовательский, Бизнес, Настраиваемый)
- Контроль доступа к функциям по тарифам
- NLP модели остаются бесплатными для всех
- LLM модели доступны по подписке

### 5. Аналитика

- Отслеживание успешности публикаций
- Статистика по платформам
- Логирование ошибок и предупреждений
- Экспорт данных

---

## 🤝 Вклад в проект

1. Fork проекта
2. Создайте feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit изменения (`git commit -m 'Add some AmazingFeature'`)
4. Push в branch (`git push origin feature/AmazingFeature`)
5. Откройте Pull Request

---

## 📝 Лицензия

[Указать лицензию]

---

## 👥 Авторы

Владислав Васильев, Глеб Пайков, Иван Корпусов
